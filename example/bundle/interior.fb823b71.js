var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire5b70;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5b70=a);var o=a("ilwiq"),r=a("RPVlj"),i=a("7lx9d"),s=a("5Rd1x"),l=a("4CEV9"),d=a("cVdfP"),c=a("891vQ"),m=a("kp7Te"),u=a("jiuw3");let p,h,g,w,b,v,f,x,y,P,F;const C={environmentIntensity:0,environmentRotation:0,emissiveIntensity:12,bounces:20,samplesPerFrame:1,resolutionScale:1/window.devicePixelRatio,filterGlossyFactor:.25,tiles:2,cameraProjection:"Perspective"};window.location.hash.includes("transmission")&&(C.material1.metalness=0,C.material1.roughness=.05,C.material1.transmission=1,C.material1.color="#ffffff",C.bounces=10);const E=window.innerWidth/window.innerHeight;function M(){const e=window.innerWidth,t=window.innerHeight,n=C.resolutionScale,a=window.devicePixelRatio;b.setSize(e*n*a,t*n*a),b.reset(),p.setSize(e,t),p.setPixelRatio(window.devicePixelRatio*n);const o=e/t;x.aspect=o,x.updateProjectionMatrix();const r=5/o;y.top=r/2,y.bottom=r/-2,y.updateProjectionMatrix()}function R(){w.materials.forEach((e=>{e.emissiveIntensity=C.emissiveIntensity})),b.reset()}function I(e){"Perspective"===e?(v===y&&x.position.copy(v.position),v=x,h.object=v):"Orthographic"===e&&(v===x&&y.position.copy(v.position),v=y,h.object=v),"Equirectangular"===e?(v=P,h.enabled=!1,g.enabled=!0,g.update()):(g.enabled=!1,h.enabled=!0,h.update()),b.camera=v,window.CAMERA=v,b.reset()}function j(){requestAnimationFrame(j),b.material.materials.updateFrom(w.materials,w.textures),b.material.filterGlossyFactor=C.filterGlossyFactor,b.material.environmentIntensity=C.environmentIntensity,b.material.environmentBlur=.35,b.material.bounces=C.bounces,v.updateMatrixWorld();for(let e=0,t=C.samplesPerFrame;e<t;e++)b.update();p.autoClear=!1,f.render(p),p.autoClear=!0,F.innerText=`Samples: ${Math.floor(b.samples)}`}E<.65&&(C.bounces=Math.min(C.bounces,10),C.resolutionScale*=.5,C.tiles=3),async function(){p=new o.WebGLRenderer({antialias:!0}),p.toneMapping=o.ACESFilmicToneMapping,p.outputEncoding=o.sRGBEncoding,document.body.appendChild(p.domElement),x=new o.PerspectiveCamera(75,E,.025,500),x.position.set(.4,.6,2.65);const e=5/E;y=new o.OrthographicCamera(-2.5,2.5,e/2,e/-2,0,100),y.position.copy(x.position),P=new l.EquirectCamera,P.position.set(-.2,.33,.08),b=new l.PathTracingRenderer(p),b.material=new l.PhysicalPathTracingMaterial,b.tiles.set(C.tiles,C.tiles),f=new r.FullScreenQuad(new o.MeshBasicMaterial({map:b.target.texture})),h=new s.OrbitControls(x,p.domElement),h.target.set(-.15,.33,-.08),x.lookAt(h.target),h.addEventListener("change",(()=>{b.reset()})),h.update(),g=new s.OrbitControls(P,p.domElement),g.target.set(-.15,.33,-.08),P.lookAt(g.target),g.addEventListener("change",(()=>{b.reset()})),g.update(),F=document.getElementById("samples");const t=(new c.RGBELoader).loadAsync("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/equirectangular/royal_esplanade_1k.hdr").then((e=>{b.material.envMapInfo.updateFrom(e)})),n=new d.PathTracingSceneWorker,a=(new i.GLTFLoader).setMeshoptDecoder(m.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/pathtracing-bathroom/modernbathroom.glb").then((e=>{e.scene.traverse((e=>{e.material&&(e.material.thickness=1)}));const t=new o.Group;t.add(e.scene);const a=new o.Box3;a.setFromObject(e.scene),t.updateMatrixWorld();const r=new o.Vector3;return a.getCenter(r),e.scene.position.addScaledVector(r,-.5),t.updateMatrixWorld(),n.generate(t)})).then((e=>{w=e;const{bvh:t,textures:a,materials:o}=e,r=t.geometry,i=b.material;i.bvh.updateFrom(t),i.normalAttribute.updateFrom(r.attributes.normal),i.tangentAttribute.updateFrom(r.attributes.tangent),i.uvAttribute.updateFrom(r.attributes.uv),i.materialIndexAttribute.updateFrom(r.attributes.materialIndex),i.textures.setTextures(p,2048,2048,a),i.materials.updateFrom(o,a),n.dispose()}));await Promise.all([a,t]),document.getElementById("loading").remove(),M(),window.addEventListener("resize",M),I(C.cameraProjection);const v=new u.GUI;v.add(C,"tiles",1,4,1).onChange((e=>{b.tiles.set(e,e)})),v.add(C,"samplesPerFrame",1,10,1),v.add(C,"filterGlossyFactor",0,1).onChange((()=>{b.reset()})),v.add(C,"environmentIntensity",0,25).onChange((()=>{b.reset()})),v.add(C,"environmentRotation",0,40).onChange((e=>{b.material.environmentRotation.setFromMatrix4((new o.Matrix4).makeRotationY(e)),b.reset()})),v.add(C,"emissiveIntensity",0,50).onChange(R),v.add(C,"bounces",1,30,1).onChange((()=>{b.reset()})),v.add(C,"resolutionScale",.1,1).onChange((()=>{M()})),v.add(C,"cameraProjection",["Perspective","Orthographic","Equirectangular"]).onChange((e=>{I(e)})),R(),j()}();
//# sourceMappingURL=interior.fb823b71.js.map
